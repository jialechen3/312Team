<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #1e1e2f;
      color: #fff;
      padding: 40px;
      margin: 0;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5rem;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #2a2a40;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    #roomName {
      width: 70%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
    }

    button {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      background-color: #4f46e5;
      color: white;
      cursor: pointer;
      font-size: 1rem;
      margin-left: 8px;
    }

    button:hover {
      background-color: #6366f1;
    }

    ul {
      list-style: none;
      padding: 0;
      margin-top: 20px;
    }

    li {
      background-color: #3b3b5c;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .team-container {
            display: flex;
            flex-direction: row;
            justify-content: space-evenly;
            padding: 40px;
            gap: 20px;
    }

    .team {
            width: 45%;
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 10px;
    }

    .team h2 {
            text-align: center;
    }

    .player {
            padding: 5px 0;
    }
  </style>
</head>
<body>
    {% if current_user %}
    <div style="text-align:right; padding: 0 20px;">
      <span>{{ current_user.username }}</span>
      <a href="{{ url_for('lobby') }}">
        <button type="button">Back to Lobby</button>
      </a>
    </div>
    <h1 style="text-align:center;">{{ lobby_id }}</h1>
    <div class="team-container">
        <div class="team">
            <h2>Team Red</h2>
                <button style="background-color: red; color: white;" onclick="joinTeam('red')">Join Team</button>
            <ul id="redPlayerList"></ul>
        </div>

    <div class="team">
        <h2>No Team</h2>
            <ul id="noPlayerList"></ul>
        </div>

    <div class="team">
        <h2>Team Blue</h2>
            <button style="background-color: blue; color: white;" onclick="joinTeam('blue')">Join Team</button>
        <ul id="bluePlayerList"></ul>
        </div>
    </div>
    <button style="background-color: white; color: black;" onclick="placeholder()">Start Game</button>
    {% else %}
    <div style="text-align:right; padding: 0 20px;">
      <a href="{{ url_for('auth.login') }}">Login</a> |
      <a href="{{ url_for('auth.register') }}">Register</a>
    </div>
  {% endif %}

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <script>
    const socket = io();

    socket.on('connect', () => {
      socket.emit('page_ready', { page: 'team_select' });
    });

    socket.on('team_red_list', (red_team) => {
      const redPlayerList = document.getElementById('redPlayerList');
      redPlayerList.innerHTML = '';
      red_team.forEach(red_player => {
        const li = document.createElement('li');
        li.innerHTML = red_player;
        redPlayerList.appendChild(li);
      });
    });

    socket.on('team_blue_list', (blue_team) => {
      const bluePlayerList = document.getElementById('bluePlayerList');
      bluePlayerList.innerHTML = '';
      blue_team.forEach(blue_player => {
        const li = document.createElement('li');
        li.innerHTML = blue_player;
        bluePlayerList.appendChild(li);
      });
    });

    socket.on('no_team_list', (no_team) => {
      const noPlayerList = document.getElementById('noPlayerList');
      noPlayerList.innerHTML = '';
      no_team.forEach(player => {
        const li = document.createElement('li');
        li.innerHTML = player;
        noPlayerList.appendChild(li);
      });
    });

    function joinTeam(team) {
      socket.emit('join_team', team);
    }

    function placeholder() {
      alert("Game would start now.");
    }
 </script>
</body>
</html>